"use strict";var express=require("express"),router=express.Router(),axios=require("axios"),db=require("../db");router.post("/",function(t,r){var a,n,s,o,l;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body,n=a.text,s=a.targetLang,console.log("Received text:",n),console.log("Target language:",s),e.prev=3,e.next=6,regeneratorRuntime.awrap(axios.post("http://localhost:5001/translate",{q:n,source:"en",target:s,format:"text"},{headers:{"Content-Type":"application/json"}}));case 6:o=e.sent,console.log("Translation API response:",o.data),l=o.data.translatedText,db.query("INSERT INTO translations (original_text, translated_text, source_lang, target_lang) VALUES (?, ?, ?, ?)",[n,l,"en",s]),r.json({translatedText:l}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("Translation Error:",e.t0.message),r.status(500).json({error:"Translation failed"});case 17:case"end":return e.stop()}},null,null,[[3,13]])}),module.exports=router;
//# sourceMappingURL=translate.min.js.map
